generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Paciente {
  id              Int     @id @default(autoincrement())
  nome_completo   String
  idade           Int
  peso            Float
  altura          Float
  sexo            String
  objetivo        String?
  nivel_atividade String?
  observacoes     String?
  tmb             Float?
  carboidratos_g  Float?
  proteinas_g     Float?
  gorduras_g      Float?

  dietas Dieta[]
}

model Dieta {
  id                  Int       @id @default(autoincrement())
  pacientes_id        Int
  nome                String
  tipo                String?
  objetivo            String?
  calorias_totais     Float
  proteinas_totais    Float
  carboidratos_totais Float
  gorduras_totais     Float
  data_inicio         DateTime
  data_fim            DateTime?
  obs                 String?
  nome_dieta          String?
  data_dieta          DateTime

  paciente  Paciente   @relation(fields: [pacientes_id], references: [id], onDelete: Cascade)
  refeicoes Refeicao[]
}

model Refeicao {
  id            Int     @id @default(autoincrement())
  nome          String
  tipo_refeicao String
  descricao     String?
  calorias      Float
  proteinas     Float
  carboidratos  Float
  gorduras      Float
  dietas_id     Int

  dieta Dieta @relation(fields: [dietas_id], references: [id], onDelete: Cascade)
}
